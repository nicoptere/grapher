(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s="./index.js")})({"./index.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_Main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/Main */ "./src/Main.js");\n\n\nvar main = new _src_Main__WEBPACK_IMPORTED_MODULE_0__["default"](document.getElementById("tg")); //,512,512);\n\nfunction raf() {\n\n    requestAnimationFrame(raf);\n\n    main.update();\n}\nraf();\n\n//# sourceURL=webpack:///./index.js?')},"./src/Item.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Item; });\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./functions */ "./src/functions.js");\n/* harmony import */ var _Main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Main */ "./src/Main.js");\n\n\n\nconst ALPHABET = "abcdefghijklmnopqrstuvwxyz";\nconst COLORS = ["#FFCC00", "#00CC99", "#ff0080", "#6600CC", "#0066CC"];\n\nlet _id = 0;\nclass Item {\n\n    static set id(value) {\n        _id = value;\n    }\n    static get id() {\n        return _id;\n    }\n\n    constructor(main, str) {\n\n        this.main = main;\n        this.id = Item.id;\n        this.method = str;\n\n        let name = this.name;\n\n        let domElement = document.createElement(\'div\');\n        domElement.setAttribute("name", name);\n        domElement.classList.add("item");\n        this.domeElement = domElement;\n        main.container.appendChild(domElement);\n\n        let label = document.createElement(\'label\');\n        label.setAttribute("for", name);\n        label.innerText = "\\t" + name + "\\t";\n        domElement.appendChild(label);\n\n        let flag = document.createElement(\'label\');\n        domElement.appendChild(flag);\n\n        let checkbox = document.createElement(\'input\');\n        checkbox.setAttribute("id", name);\n        checkbox.type = "checkbox";\n        checkbox.checked = true;\n        domElement.appendChild(checkbox);\n\n        let colorField = document.createElement(\'input\');\n        colorField.type = "color";\n        colorField.value = this.color;\n        domElement.appendChild(colorField);\n\n        let textField = document.createElement(\'input\');\n        textField.type = "text";\n        textField.tabIndex = this.id + 1;\n        textField.value = str;\n        domElement.appendChild(textField);\n\n        let deleteBtn = document.createElement(\'input\');\n        deleteBtn.type = "button";\n        deleteBtn.value = "delete";\n        deleteBtn.addEventListener("mousedown", () => {\n            this.dispose();\n        });\n        domElement.appendChild(deleteBtn);\n\n        this.checkbox = checkbox;\n        this.colorField = colorField;\n        this.deleteBtn = deleteBtn;\n        this.flag = flag;\n        this.textField = textField;\n\n        this.update();\n        Item.id++;\n    }\n\n    update(time = 0) {\n\n        this.active = this.checkbox.checked;\n\n        if (document.activeElement === this.textField) {\n            this.selected = true;\n        }\n\n        let name = this.name;\n        var str = this.textField.value.replace(/\\s\\s+/g, \' \'); //remove duplicate spaces\n        try {\n            eval("window[name] = functions[name] = function(x){ return " + str + "; }; ");\n            _functions__WEBPACK_IMPORTED_MODULE_0__["default"][name](1);\n            this.valid = true;\n        } catch (e) {\n            this.valid = false;\n            return;\n        }\n        _functions__WEBPACK_IMPORTED_MODULE_0__["default"].dictionary[name] = "(" + str.replace(/x\\b/gi, "?") + ")";\n        this.method = str;\n    }\n\n    dispose() {\n\n        this.main.dispose(this);\n        this.main.container.removeChild(this.domeElement);\n    }\n\n    get name() {\n        let num = this.id < ALPHABET.length ? \'\' : ~~(this.id / ALPHABET.length) - 1;\n        return ALPHABET.charAt(this.id % ALPHABET.length) + num;\n    }\n    get color() {\n        return COLORS[this.id % COLORS.length];\n    }\n\n    get active() {\n        return this._active;\n    }\n    set active(value) {\n        this._active = value;\n    }\n\n    get method() {\n        return this._method;\n    }\n    set method(value) {\n        this._method = value;\n    }\n\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        this._selected = value;\n    }\n\n    get valid() {\n        return this._valid;\n    }\n    set valid(value) {\n        this._valid = value;\n        if (value) {\n            this.flag.classList.remove("invalid");\n        } else {\n            this.flag.classList.add("invalid");\n        }\n    }\n\n}\n\n//# sourceURL=webpack:///./src/Item.js?')},"./src/Main.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Main; });\n/* harmony import */ var _Renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Renderer */ "./src/Renderer.js");\n/* harmony import */ var _Item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Item */ "./src/Item.js");\n/* harmony import */ var _UI__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./UI */ "./src/UI.js");\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./functions */ "./src/functions.js");\n/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./storage */ "./src/storage.js");\n\n\n\n\n\n\nlet startTime;\nclass Main {\n\n        constructor(domElement, width = -1, height = -1) {\n\n                this.container = domElement;\n\n                if (width === -1 || height === -1) {\n\n                        let rect = domElement.getBoundingClientRect();\n                        width = rect.width;\n                        height = rect.height;\n                }\n\n                this.renderer = new _Renderer__WEBPACK_IMPORTED_MODULE_0__["default"](this, width, height);\n\n                this.items = [];\n\n                _functions__WEBPACK_IMPORTED_MODULE_3__["default"].init();\n\n                new _UI__WEBPACK_IMPORTED_MODULE_2__["default"](this, this.renderer);\n\n                _storage__WEBPACK_IMPORTED_MODULE_4__["default"].init(this);\n\n                this.startTime = Date.now();\n        }\n\n        addNew(x) {\n\n                var i = new _Item__WEBPACK_IMPORTED_MODULE_1__["default"](this, x);\n                this.items.push(i);\n        }\n\n        dispose(item) {\n\n                var i = this.items.indexOf(item);\n                if (i === -1) return;\n                this.items.splice(i, 1);\n                _storage__WEBPACK_IMPORTED_MODULE_4__["default"].update(this.items);\n        }\n\n        update() {\n\n                window.time = (Date.now() - this.startTime) * .001;\n\n                this.items.forEach(item => {\n\n                        item.update(time);\n                });\n\n                _storage__WEBPACK_IMPORTED_MODULE_4__["default"].update(this.items);\n\n                this.renderer.render(this.items);\n        }\n\n}\n\n//# sourceURL=webpack:///./src/Main.js?')},"./src/Renderer.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Renderer; });\n/* harmony import */ var _Main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Main */ "./src/Main.js");\n\n\nlet ctx, w, h, range, scale;\n\nclass Renderer {\n\n    constructor(main, width = 512, height = 512) {\n\n        const canvas = document.createElement("canvas");\n        w = canvas.width = width;\n        h = canvas.height = height;\n        this.ctx = ctx = canvas.getContext(\'2d\');\n\n        let holder = document.createElement("div");\n        holder.classList.add(\'canvasHolder\');\n        holder.style.width = width + "px";\n        holder.style.height = height + "px";\n        holder.appendChild(canvas);\n        this.holder = holder;\n\n        main.container.appendChild(holder);\n\n        this.canvas = canvas;\n        this.margin = 20;\n    }\n\n    render(list) {\n\n        let r = this.holder.getBoundingClientRect();\n\n        w = this.canvas.width = r.width;\n        h = this.canvas.height = r.height;\n\n        var rangeTypes = document.getElementsByName("range");\n        for (var i = 0; i < rangeTypes.length; i++) {\n            if (rangeTypes[i].checked) range = i;\n        }\n\n        var s = Math.min(w, h) - this.margin;\n        scale = range === 0 ? 1 : range === 1 ? 1 / s : 2 / s;\n\n        ctx.save();\n        ctx.strokeStyle = "#AAA";\n        ctx.lineWidth = .5;\n        ctx.clearRect(0, 0, w, h);\n        if (range === 1) {\n            let one = s;\n            ctx.translate(this.margin * .5, h - this.margin * .5);\n            ctx.rect(0, 0, one, -one);\n            ctx.stroke();\n        } else {\n            ctx.translate(w / 2, h / 2);\n            let one = s / 2;\n            ctx.rect(-one, one, one * 2, -one * 2);\n            ctx.stroke();\n        }\n\n        list.forEach(item => {\n            this.renderItem(item);\n        });\n\n        ctx.beginPath();\n        ctx.moveTo(0, -h);\n        ctx.lineTo(0, h);\n        ctx.moveTo(-w, 0);\n        ctx.lineTo(w, 0);\n        ctx.stroke();\n\n        ctx.restore();\n    }\n\n    lerp(t, a, b) {\n        return a * (1 - t) + b * t;\n    }\n\n    normalize(t, a, b) {\n        return (t - a) / (b - a);\n    }\n\n    remap(t, a0, b0, a1, b1) {\n        return this.lerp(this.normalize(t, a0, b0), a1, b1);\n    }\n\n    renderItem(item) {\n\n        if (item.active === false) return;\n        if (item.valid === false) return;\n\n        var fc = functions[item.name];\n        ctx.strokeStyle = item.color || "#F00";\n        ctx.beginPath();\n\n        for (var i = -w / 2 - this.margin; i <= w / 2 + this.margin; i++) {\n\n            var x = range === 0 ? i : range === 1 ? this.normalize(i, -w / 2, w / 2) : this.remap(i, -w / 2, w / 2, -1, 1);\n            var y = -fc(x);\n\n            if (isNaN(y) || y === Math.POSITIVE_INFINITY || y === Math.NEGATIVE_INFINITY) {\n                ctx.lineTo(x / scale, 0);\n            } else {\n                ctx.lineTo(x / scale, y / scale);\n            }\n        }\n\n        ctx.stroke();\n    }\n\n}\n\n//# sourceURL=webpack:///./src/Renderer.js?')},"./src/UI.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return UI; });\n\nclass UI {\n\n    constructor(main, canvas) {\n\n        this.createCSS();\n\n        let domElement = document.createElement(\'div\');\n        domElement.setAttribute("name", "UI");\n        domElement.classList.add("item");\n        this.domeElement = domElement;\n        main.container.appendChild(domElement);\n\n        //add new button:\n        let el = document.createElement("button");\n        el.innerHTML = "add new";\n        el.addEventListener("mousedown", () => {\n            main.addNew("x");\n        }, false);\n        domElement.appendChild(el);\n\n        //spaces types\n        ["free", "unit", "bi-unit"].forEach((str, i, a) => {\n\n            let el = document.createElement("input");\n            el.type = "radio";\n            el.name = "range";\n            el.setAttribute("id", str);\n            el.checked = i === a.length - 1;\n            domElement.appendChild(el);\n\n            let la = document.createElement("label");\n            la.setAttribute("for", str);\n            la.innerHTML = str;\n            domElement.appendChild(la);\n        });\n    }\n\n    createCSS() {\n\n        //this creates a CSS file, the hard way.\n        var css = document.createElement(\'style\');\n        css.type = \'text/css\';\n        css.appendChild(document.createTextNode(`.invalid{" +\n                pointer-events: none;\n                position:absolute;\n                border-style: solid;\n                border-width: 0 8px 16px 8px;\n                border-color: transparent transparent #CC0000 transparent;\n            }\n            .item{\n                display: flex;\n                /*justify-content: center;*/\n                align-items: center;\n            }\n            .canvasHolder{\n            \n                overflow:hidden;\n                resize: both;\n                border: 1px solid #EEE;\n                 \n            }\n            \n            input[type=text]{\n                -webkit-transition: all 0.5s;\n                transition: all 0.5s;\n            }\n            input[type=text], input[type=button] {\n                padding: 6px 10px;\n                width: auto;\n                margin: 4px 0;\n                box-sizing: border-box;\n                border: 1px solid #EEE;\n                outline: none;\n            }\n            \n            input[type=color] {\n                padding:2px;\n                margin:0 8px 0 8px;\n                height:30px;\n                width:30px;\n                border: 0;\n            }\n            \n            input[type=text]:focus {\n                width: 100%;\n                border: 1px solid #AAA;\n            }\n            \n            input[type=button]{\n                background-color:#EEEEEE;\n            }\n            \n            input[type=button]:hover {\n                background-color:#F6F6F6;\n            }`));\n        document.getElementsByTagName("head")[0].appendChild(css);\n    }\n\n}\n\n//# sourceURL=webpack:///./src/UI.js?')},"./src/functions.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return functions; });\n\nclass functions {\n\n    static init() {\n\n        window.functions = functions;\n        functions.dictionary = {};\n\n        var dictionary = {};\n        var builtInfunctions = ["sin", "cos", "pow", "tan", "log", "exp", "abs", "sqrt", "asin", "acos", "min", "max", "ceil", "floor", "PI", "atan", "abs"];\n        builtInfunctions.forEach(function (f) {\n            window[f] = Math[f];\n            dictionary[f] = f + "(?)";\n            functions[f] = Math[f];\n        });\n\n        //todo implement GLSL methods & types\n        window.smoothstep = functions["smoothstep"] = function (a, b, t) {\n            return mix(a, b, t * t * (3.0 - 2.0 * t));\n        };\n        window.mix = functions["mix"] = function (a, b, t) {\n            return a * (1 - t) + b * t;\n        };\n        window.fract = functions["fract"] = function (x) {\n            return x % 1;\n        };\n        window.mod = functions["mod"] = function (x, a) {\n            return x % a;\n        };\n        window.sign = functions["sign"] = function (x) {\n            return x >= 0 ? 1 : -1;\n        };\n        window.clamp = functions["clamp"] = function (x, min, max) {\n            return Math.min(max, Math.max(min, x));\n        };\n    }\n}\n\n//# sourceURL=webpack:///./src/functions.js?')},"./src/storage.js":function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return storage; });\n\nclass storage {\n\n    static init(main) {\n\n        //rebuilds formulas if they were stored locally\n        var customMethods = JSON.parse(localStorage.getItem('customMethods'));\n\n        if (customMethods !== null) {\n\n            customMethods.forEach(function (s) {\n                main.addNew(s);\n            });\n        }\n    }\n\n    static update(items) {\n\n        //saves the customMethods locally to display something on load\n        localStorage.setItem('customMethods', JSON.stringify(items.map(item => {\n            return item.method;\n        })));\n    }\n\n}\n\n//# sourceURL=webpack:///./src/storage.js?")}});